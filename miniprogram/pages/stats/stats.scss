@import '../../styles/theme.scss';
@import '../../styles/mixins.scss';

.container {
  min-height: 100vh;
  background: $bg-primary;
}

.content {
  min-height: 100%;
  padding-bottom: 160rpx;
  padding-bottom: calc(160rpx + env(safe-area-inset-bottom));
}

// ── 骨架屏 ────────────────────────────────────────────
.skeleton-banner {
  margin: $spacing-lg;
  height: 360rpx;
  border-radius: $radius-xl;
  background: linear-gradient(90deg, $border-light 25%, $bg-card 50%, $border-light 75%);
  background-size: 400% 100%;
  animation: shimmer 1.4s ease infinite;
}

.skeleton-card {
  margin: 0 $spacing-lg;
  height: 160rpx;
  border-radius: $radius-xl;
  background: linear-gradient(90deg, $border-light 25%, $bg-card 50%, $border-light 75%);
  background-size: 400% 100%;
  animation: shimmer 1.4s ease 0.15s infinite;
}

@keyframes shimmer {
  0%   { background-position: 100% 0; }
  100% { background-position: -100% 0; }
}

// ── Banner ────────────────────────────────────────────
.banner {
  margin: $spacing-lg $spacing-lg 0;
  border-radius: $radius-xl;
  background: linear-gradient(145deg, $primary-teal 0%, $primary 45%, $primary-dark 100%);
  padding: 56rpx $spacing-xl 48rpx;
  position: relative;
  overflow: hidden;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  box-shadow: 0 16rpx 48rpx rgba(79, 70, 229, 0.35), 0 4rpx 12rpx rgba(79, 70, 229, 0.2);

  // 装饰光圈
  .banner-bg-circle {
    position: absolute;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.06);
    pointer-events: none;

    &.c1 {
      width: 320rpx;
      height: 320rpx;
      top: -120rpx;
      right: -80rpx;
    }
    &.c2 {
      width: 200rpx;
      height: 200rpx;
      bottom: -80rpx;
      left: 40rpx;
      background: rgba(255, 255, 255, 0.04);
    }
    &.c3 {
      width: 120rpx;
      height: 120rpx;
      top: 40rpx;
      left: 200rpx;
      background: rgba(255, 255, 255, 0.08);
    }
  }

  .banner-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 12rpx;
    position: relative;
    z-index: 1;

    .banner-eyebrow {
      font-size: $font-xs;
      color: rgba(255, 255, 255, 0.6);
      letter-spacing: 3rpx;
      font-weight: 500;
    }

    .banner-score {
      font-size: 88rpx;
      font-weight: 900;
      color: #fff;
      line-height: 1;
      letter-spacing: -2rpx;

      &.pos { color: #C7D2FE; }  // indigo-200，banner 内白色调
      &.neg { color: #FCA5A5; }  // red-300，banner 内白色调
    }

    .banner-sub {
      font-size: $font-xs;
      color: rgba(255, 255, 255, 0.55);
      margin-top: 4rpx;
    }
  }

  // 胜率圆环
  .arc-wrap {
    position: relative;
    z-index: 1;
    width: 160rpx;
    height: 160rpx;
    flex-shrink: 0;

    .arc-track {
      position: absolute;
      inset: 0;
      border-radius: 50%;
      background: conic-gradient(
        rgba(255,255,255,0.9) calc(var(--pct) * 360deg),
        rgba(255,255,255,0.15) calc(var(--pct) * 360deg)
      );

      // 内圆镂空
      &::after {
        content: '';
        position: absolute;
        inset: 20rpx;
        border-radius: 50%;
        background: $gradient-primary;
      }
    }

    .arc-center {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 1;

      .arc-value {
        font-size: $font-lg;
        font-weight: 800;
        color: #fff;
        line-height: 1;
        text-align: center;
      }

      .arc-label {
        font-size: 22rpx;
        color: rgba(255, 255, 255, 0.6);
        margin-top: 6rpx;
        text-align: center;
      }
    }
  }
}

// ── 胜负平三格 ────────────────────────────────────────
.record-row {
  margin: $spacing-lg $spacing-lg 0;
  display: flex;
  flex-direction: row;
  gap: $spacing-md;

  .record-cell {
    flex: 1;
    @include card;
    padding: $spacing-lg $spacing-md;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: $spacing-xs;
    position: relative;
    overflow: hidden;
    animation: fadeInUp 0.4s $transition-normal both;

    &.win  { animation-delay: 0.05s; }
    &.draw { animation-delay: 0.1s; }
    &.loss { animation-delay: 0.15s; }

    // 顶部彩色细线
    &::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 4rpx;
      border-radius: $radius-full $radius-full 0 0;
    }
    &.win::before  { background: linear-gradient(90deg, $primary-teal, $primary-light); }
    &.draw::before { background: linear-gradient(90deg, $text-gray, $border-color); }
    &.loss::before { background: linear-gradient(90deg, $red, $red-light); }

    .record-dot {
      width: 16rpx;
      height: 16rpx;
      border-radius: 50%;
      &.win-dot  { background: $primary; box-shadow: 0 0 8rpx $primary-glow; }
      &.draw-dot { background: $text-gray; }
      &.loss-dot { background: $red; box-shadow: 0 0 8rpx rgba(239, 68, 68, 0.4); }
    }

    .record-num {
      font-size: $font-2xl;
      font-weight: 800;
      line-height: 1;
      text-align: center;
      width: 100%;
    }
    &.win  .record-num { color: $primary; }
    &.draw .record-num { color: $text-gray; }
    &.loss .record-num { color: $red; }

    .record-tag {
      font-size: $font-xs;
      color: $text-gray;
      font-weight: 500;
      text-align: center;
      width: 100%;
    }
  }
}

// ── 胜负分布条 ────────────────────────────────────────
.bar-card {
  margin: $spacing-lg $spacing-lg 0;
  @include card;
  padding: $spacing-lg;
  animation: fadeInUp 0.4s $transition-normal 0.2s both;

  .bar-labels {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    margin-bottom: $spacing-md;

    .bar-label-win {
      font-size: $font-sm;
      font-weight: 600;
      color: $primary;
    }
    .bar-label-loss {
      font-size: $font-sm;
      font-weight: 600;
      color: $red;
    }
  }

  .bar-track {
    display: flex;
    flex-direction: row;
    height: 20rpx;
    border-radius: $radius-full;
    overflow: hidden;
    gap: 4rpx;

    .bar-win {
      background: linear-gradient(90deg, $primary-teal, $primary-light);
      border-radius: $radius-full 0 0 $radius-full;
      min-width: 4rpx;
    }
    .bar-draw {
      background: $border-light;
      min-width: 4rpx;
    }
    .bar-loss {
      background: linear-gradient(90deg, $red-light, $red);
      border-radius: 0 $radius-full $radius-full 0;
      min-width: 4rpx;
    }
  }
}

// ── 空状态 ────────────────────────────────────────────
.empty-wrap {
  margin-top: $spacing-2xl;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: $spacing-sm;
  animation: fadeIn 0.4s $transition-normal both;

  .empty-icon {
    font-size: 96rpx;
    line-height: 1;
    margin-bottom: $spacing-sm;
  }
  .empty-title {
    font-size: $font-lg;
    font-weight: 600;
    color: $text-secondary;
    text-align: center;
  }
  .empty-desc {
    font-size: $font-sm;
    color: $text-gray;
    text-align: center;
  }
}

// ── 入场动画 ──────────────────────────────────────────
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(24rpx); }
  to   { opacity: 1; transform: translateY(0); }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}
